## 1. 正规方程的推导过程

定义观测结果y和预测结果y'之间的差别为Rss:
> $Rss = \sum^n_{i=1}(y_i - y^{i}_{i})^2 = \sum^n_{i=1}(y_i - h(x_i))^2 = (y - h(X)) ^T \times (y - h(X))$

设若参数的矩阵为$\theta$,则$h(X)=\theta \times X$

> 那么$Rss = (y - X\theta) ^T \times (y - X\theta)$

按照我们的定义，这个Rss的意思是y和y'之间的差，那么当Rss无限趋近于0的时候，则y≈y'，即我们求得的预测结果就等于实际结果。

> 于是，令Rss等于某一极小值$\sigma$，则$(y - X\times\theta) ^T  (y - X\times\theta) == \sigma$

对参数$\theta$求导，得：

> $\frac{d}{d(\theta)}(y - X\times\theta)^T(y - X\times\theta) == 2X^T  (y - X\times\theta) == 0$

> 展开，得$2X^T \times y =2X^TX\theta$

> 进而就可以得到$\theta = (2X^T X)^{-1} 2X^T  y$

- 正规方程 VS 梯度下降
  
| 梯度下降 | 正规方程 |
| :------ | :------ |
| 需要选择学习率$\alpha$ |不需要 |
| 需要多次迭代 | 不需要（直接算出来的） |
| 当特征n十分庞大时，也能训练的很好 | 需要计算$(X^TX)^{-1}$|
|| 当n很大时，收敛速度十分慢 |

比如当n=10000以上时，选择梯度下降，以下选择正规方程比较好

## 2. 正规方程在矩阵不可逆的情况下的解决方法

我们已知：$\theta = (2X^T X)^{-1} 2X^Ty$
但是有时候矩阵$X^TX$可能是不可逆的，那么我们可以通过：<u>奇异或退化矩阵</u> 

$X^TX$不可逆的可能性有：
  - 多余的特征 ，比如带来线性关系： 
    - E.g 在房价预测时，$x_1$= 以平方英尺为单位的房子面积，$x_2$ = 以平方米为单位的房子面积。这两个参数始终满足 1 $feet^2$ =  $3.28^2 m^2$ 的关系。
    - 即，在一个矩阵中如果存在线性关系，那么矩阵一定不是满秩。而满秩是矩阵可逆的充要条件。
  - 过多的特征，如导致矩阵$(m(m个训练样本) \leq n(n个特征))$：
    - 例如 对于10个训练样本寻找100个训练特征，那么我们需要找到一个合适的101维的参数$\theta$向量。那么我们需要在10个训练样本中训练101维的参数。为了配置这么多参数，训练样本过少。
    - 解决办法：减少特征或者使用正则化


- 证明：可逆矩阵一定是方阵： 
    
    证明：如果对于矩阵$X_{m \times n}$ ，且(m!=n)有可逆矩阵，则设$X_{m \times n}$的可逆矩阵为$Y_{n \times }$
        
    >有$X_{m \times n} \times Y_{n \times z} = E_{m \times z}$ 且
    $Y_{n \times z} \times X_{m \times n}  = E_{n \times n}$
        那么应有 $E_{m\times z} = E_{n \times n}$
        
    即$m=n ,z=n$
    >因此可逆矩阵一定是方阵。

